<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Selection Sort Visualization</title>
    <link rel="stylesheet" href="style.css">

    <style>
        :root {
            --bg: #160e0f;
            --text: #f4eded;
            --prim: #c8a8aa;
            --sec: #614b3d;
            --accent: #ab9a79;
        }

        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: var(--bg);
        }

        .container {
            text-align: center;
        }

        #arrayContainer {
            display: flex;
            justify-content: center;
            margin-top: 20px;
            position: relative;
        }

        .bar {
            width: 30px;
            margin: 0 2px;
            background-color: #3498db;
            transition: height 0.3s, background-color 0.3s;
            position: relative;
        }

        .bar.selected {
            background-color: #e74c3c;
        }

        .bar.sorted {
            background-color: #2ecc71;
        }

        #infoText {
            margin-bottom: 10px;
            font-size: 18px;
            color: #333;
        }

        input {
            height: 30px;
            border-radius: 10px;
            border: none;
            outline: none;
            padding: 5px;
            width: 50%;
        }

        hr {
            background: var(--bg);
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Selection Sort Visualization</h1>
        <input type="text" id="arrayInput" placeholder="Enter numbers separated by commas">
        <button id="sortButton">Sort</button>
        <hr>
        <div id="infoText"></div>
        <div id="arrayContainer"></div>
    </div>

    <script>
        document.getElementById('sortButton').addEventListener('click', selectionSort);

        async function selectionSort() {
            const input = document.getElementById('arrayInput').value;
            const arr = input.split(',').map(Number).filter(num => !isNaN(num));

            if (arr.length === 0) return; // Prevent sorting if no valid input
            await sortArray(arr);
        }

        function visualizeArray(arr, minIdx = -1) {
            const container = document.getElementById('arrayContainer');
            container.innerHTML = ''; // Clear previous visualization

            arr.forEach((value, index) => {
                const bar = document.createElement('div');
                bar.className = 'bar';
                bar.style.height = `${value * 10}px`;

                if (index === minIdx) {
                    bar.classList.add('selected');
                } else if (index < minIdx) {
                    bar.classList.add('sorted');
                }

                // Create a span element for the value
                const valueLabel = document.createElement('span');
                valueLabel.textContent = value;
                valueLabel.style.position = 'absolute';
                valueLabel.style.bottom = '100%'; // Position above the bar
                valueLabel.style.left = '50%';
                valueLabel.style.transform = 'translateX(-50%)'; // Center the label
                valueLabel.style.fontSize = '12px';
                valueLabel.style.color = '#333';

                bar.style.position = 'relative'; // Make bar a positioning context
                bar.appendChild(valueLabel); // Append the value to the bar
                container.appendChild(bar);
            });
        }

        async function sortArray(arr) {
            const n = arr.length;
            const infoText = document.getElementById('infoText');

            for (let i = 0; i < n - 1; i++) {
                let minIdx = i;
                infoText.textContent = `Step ${i + 1}: Start with element ${arr[i]} as minimum.`;
                visualizeArray(arr, minIdx);
                await sleep(2000); // Delay for visualization

                for (let j = i + 1; j < n; j++) {
                    infoText.textContent = `Comparing ${arr[minIdx]} and ${arr[j]}.`;
                    visualizeArray(arr, minIdx);
                    await sleep(2000); // Delay for visualization

                    if (arr[j] < arr[minIdx]) {
                        minIdx = j;
                        infoText.textContent = `New minimum found: ${arr[minIdx]}.`;
                    }
                    visualizeArray(arr, minIdx);
                    await sleep(2000); // Delay for visualization
                }

                if (minIdx !== i) {
                    infoText.textContent = `Swapping ${arr[i]} and ${arr[minIdx]}.`;
                    [arr[i], arr[minIdx]] = [arr[minIdx], arr[i]];
                    visualizeArray(arr);
                    await sleep(2000); // Delay for visualization
                }

                infoText.textContent = `Sorted portion: ${arr.slice(0, i + 1).join(', ')}`;
            }
            infoText.textContent = `Final sorted array: ${arr.join(', ')}`;
            visualizeArray(arr); // Final visualization
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

    </script>
</body>

</html>